<!DOCTYPE html>
<html lang="en">

<!--================================================================================
	Item Name: Materialize - Material Design Admin Template
	Version: 3.1
	Author: GeeksLabs
	Author URL: http://www.themeforest.net/user/geekslabs
================================================================================ -->
<head>
   <title>#{name}</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
        
        
		<meta name="og:title" content="#{name}" />
        <meta name="og:url" content="https://bitsoko.co.ke/app" />
        <meta name="og:image" content="#{img}" />
        
		<meta name="og:description" content="#{desc}" />
        
		<meta name="description" content="#{desc}" />
        <meta name="keywords" content="" />
        <link rel="shortcut icon" type="image/png" href="#{img}">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="viewport" content="width=device-width,user-scalable=no">
        <meta name="msapplication-navbutton-color" content="#0f5f76">
   <meta name="theme-color" content="#0f5f76">
  <meta name="google-signin-client_id" content="#{cid}"></meta>

  <link rel="manifest" href="web-manifest.json">

<script src="https://bitsoko.io/bitsAssets/js/webcomponents.js" async></script>
    <!-- CORE CSS-->    
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection">
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection">
    <!-- Custome CSS-->    
    <link href="css/custom/custom.css" type="text/css" rel="stylesheet" media="screen,projection">
    <link href="css/keypad.css" type="text/css" rel="stylesheet" media="">


    <!-- INCLUDED PLUGIN CSS ON THIS PAGE -->
    <link href="js/plugins/perfect-scrollbar/perfect-scrollbar.css" type="text/css" rel="stylesheet" media="screen,projection">
    <link href="js/plugins/jvectormap/jquery-jvectormap.css" type="text/css" rel="stylesheet" media="screen,projection">
    <link href="js/plugins/chartist-js/chartist.min.css" type="text/css" rel="stylesheet" media="screen,projection">

<link rel="import" href="https://bitsoko.io/bitsAssets/html/connector.html">
</head>

<body onload="starting()">
	<bits-connect></bits-connect>
    <!-- Start Page Loading -->
    <div id="loader-wrapper">
        <div id="loader"></div>        
        <div class="loader-section section-left"></div>
        <div class="loader-section section-right"></div>
    </div>
    <!-- End Page Loading -->

    <!-- //////////////////////////////////////////////////////////////////////////// -->

    
    <!-- START HEADER -->
    <header id="header" class="page-topbar bits">
        <!-- start header nav-->
        <div class="navbar-fixed">
            <div  id="bits-header" class="navbar-color bits">
                <div class="nav-wrapper">
                    <ul class="center">                      
                      <li ><h1 class="logo-wrapper"><a href="index.html" class="brand-logo darken-1"><img src="images/logo-bits.png" style="width:55px" alt="bits logo"></a> <span class="logo-text">Bits</span></h1></li>
                      <li></li>
                    </ul>
                  <!--   <div class="header-search-wrapper hide-on-med-and-down">
                        <i class="mdi-action-search"></i>
                        <input type="text" name="Search" class="header-search-input z-depth-2" placeholder="Explore Materialize"/>
                    </div>
                    
                    translation-button -->
                    <div class="bits-nav-bal right" id="bits-nav-bal"style="color:#fff; padding-right:10px; margin-top: -75px;" >0.00 KSH</div>
                    <!-- notifications-dropdown -->
                  
                </div>
            </div>
        </div>
        <!-- end header nav-->
    </header>
    <!-- END HEADER -->

    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <!-- START MAIN -->
    <div id="main">
        <!-- START WRAPPER -->
        <div class="wrapper">

           <!-- START LEFT SIDEBAR NAV-->
      <aside id="left-sidebar-nav">
        <ul id="slide-out" class="side-nav fixed leftside-navigation ">
         <li class="user-details cyan darken-2 dropdown-button"  style="background-color:#228dac!important " href="#" data-activates="account-dropdown">
  	      
		      <div class="row" style="text-align:center;">
                <img src="images/contacts.png" alt="" class="bits-profile circle responsive-img valign profile-image"style="background-color: white;">
                 <a class="btn-flat waves-effect waves-light white-text profile-btn username-label" href="#" data-activates="">Jane Mwangi<i class="mdi-navigation-arrow-drop-down right"></i></a>
                   <center><span class=" user-roal username-addr left col s12 bits-ellipsis" style=""></center></span><p><center>
                    <span class="user-roal store-desc white-text" style="text-align:left; "> 1 BTC = 0 KSH</span></p></center>
               
            </div>
            </li>
            <li ><div class="">
        <div class="col s12 m6"><center>
            <div  id="qrcode">
          </div></center>
          
      </div>
      </li>
      <!--<li>
      <div class="col s12 m8 l9">
                 <div class="col col s8 m8 l8">
                 <div class="col col s8 m8 l8">
                   <center>Current Account</center>
                    <div class=" col s12 dropdown-bits"><!-- 
    <select id="" class="icons">
      <option value="" disabled selected class="dropdown-bits"><p style="left:20%;">Choose current Account</p></option>
      <option  value="" data-show="" data-icon="images/contacts.png" class="left circle">Anonymous</option>
      <option value="" data-show="" data-icon="images/sample-1.jpg" class="left circle"></i>Google Account</option>
    </select>

     <label class="bis-font-size "><center>Current Account</center></label>
  </div>
                   
                </div>
                </div>
        </div></li>-->
            <li class="li-hover"><div class="divider"></div></li>
            <li class="li-hover"><p class="ultra-small margin more-text">SETTINGS</p></li>
            
             <li><a href="#">
             <!-- Switch -->
                  <div class="switch">
                  <i class="mdi-communication-chat"></i>
                   <span class="js-push-button-notification-title bits-13" style="">Notifications </span> 
                    <label>
                      <input type="checkbox" class="js-push-button-notification">
                      <span class="lever right" style="margin-top:13px;"></span>
                    </label>
                  </div>

                  </a>
            </li>
            <li><a href="#">
             <!-- Switch -->
                  <div class="switch ">
                  <i class="mdi-communication-location-on"></i>
                     <span class="js-loc-button-notification-title bits-13" style="">Location</span>  
                    <label>
                      <input type="checkbox" class="js-loc-button-notification">
                      <span class="lever right" style="margin-top:13px;"></span>
                    </label>
                  </div>

                  </a>
            </li>
            <li><a href="#">
              Switch 
                  <div class="switch">
                  <i class="mdi-social-person-add"></i>
                   <span class="bits-13" style=""></span>   Backup  
                    <!-- <label>
                     <input type="checkbox">
                      <span class="lever right" style="margin-top:13px;"></span>
                    </label>-->
                  </div>

                  </a>
            </li>
           
        </ul>
        <a href="#" data-activates="slide-out" class="sidebar-collapse btn-floating btn-medium waves-effect waves-light hide-on-large-only bits"><i class="mdi-navigation-menu"></i></a>
        </aside>
      <!-- END LEFT SIDEBAR NAV-->
      <!-- END LEFT SIDEBAR NAV-->

            <!-- //////////////////////////////////////////////////////////////////////////// -->

            <!-- START CONTENT -->
            <section id="content "style="margin-bottom: 450px;">

                <!--start container-->
                <div class="bal bits nav-wrapper center">
<div id="index-banner" class="waves-effect">
    <div class="section no-pad-bot">
      <div class="container">
       <div class="row center">
          <h5 class="header col s12 light" style="color:#fff;">Balance</h5>
        </div>
        <div class="row center">
          <a  id="download-button" class="" style="font-size:18px; color:#fff !important;"><span style="font-size:26px;">0.00 </span>KSH</a><p>
          <a  id="download-button" class="" style="color:#fff;">0 btc</a>
         <!-- btn-large waves-effect waves-light  bits -->
        </div>
        

      </div>
    </div></div>
    </div>

                    <!-- //////////////////////////////////////////////////////////////////////////// -->
<div class="">

                    <!-- //////////////////////////////////////////////////////////////////////////// -->

<div class="card-container-bits " id="" >
		<div class="card-bit serviceListCard"> <div class="card small maincard"  style="border-radius: 0px;">
                                    <div  class="card-image waves-effect waves-block waves-light">
                                      <img  src="images/merchantsBanner.png" alt="blog-img" class="cardimage service-banner"style="border-radius: 0px;"> 
                                    </div>
                                    <ul class="card-action-buttons left">
                                        <li><div class="col s2">
                                        <img src="images/merchants.png" alt="" class="cardLogo bits-up circle btn-floating btn-large  waves-effect waves-light bits-white accent-4 responsive-img valign profile-image">
                                            </div>
                                        
                                        </li>
                                        
                                    </ul>
                                    <ul class="card-action-buttons">
                                     
                                    </ul>
                                    <div class="card-content ">
                                        
                                                                               
                                        <div class="row bits-row">
                                          
                                          <div class="col s12 "style="margin-top: -12%;"> <h5 class="serviceName bits-move"></h5></div>
                                        </div>
                                      <div class="row">
                                        <p class="serviceDescription ">Loading....</p>
                                    
                                      </div> 
                                     
                                </div>
                                <div class="row bits-tab" style=" margin-bottom: 0px;">
                                     <ul class="card-action-buttons col s12 m8 l9 "style="margin-top: 5px;">
                                     <p><span> Totals:</span> <span class="totals"></span></p>
                                      <!--<li class="card-action-buttons col s6 m8 l9  white-text"><a class="saleButton bits-transpatent col s12 m8 l9 btn-flat  white-text btn waves-effect waves-light  accent-4 "style="background-color: rgba(0, 0, 0, 0) !important;"><i class="mdi-communication-call-made"></i> Send</a>
                                        </li>
                                        <li class="card-action-buttons col s6 m8 l9 "><a class="saleButton bits-transpatent col s12 m8 l9 btn waves-effect waves-light  accent-4 btn-flat  white-text"style="background-color: rgba(0, 0, 0, 0) !important;" ><i class="mdi-communication-call-received"></i> Receive</a>
                                        </li>                            
                                         <li><a class="btn-floating waves-effect waves-light light-blue"><i class="mdi-action-search activator"></i></a>
                                        </li>-->
                                    </ul> 
                                    </div>
                                </div>
                            </div>
     
                                          
           <div class="col s12 m8 l9">
                <ul  class="serviceListHolder collection" style="display:none;">
                 
                
                  
                </ul>
                 <ul id="card-widgets" class="promoHolder collection">
                 
                
                  
                </ul>
              </div> 

                    </div>            
                            
    </div>
                 

                    <!-- //////////////////////////////////////////////////////////////////////////// -->

                    <!--work collections start-->
                    
                           
                    <!--work collections end-->

                    <!-- Floating Action Button 
                    <div class="fixed-action-btn " style="bottom: 50px; right: 19px;">
                        <a class="btn-floating btn-large bits">
                          <i class="mdi-content-add"></i>
                        </a>
                        <ul class="serviceButtonsHolder">
                         
                         
                        </ul>
                    </div>
                    <!-- Floating Action Button -->

                </div>
                <!--end container-->
            </section>
            <!-- END CONTENT -->

            <!-- //////////////////////////////////////////////////////////////////////////// -->
            <!-- START RIGHT SIDEBAR NAV-->
          
            <!-- LEFT RIGHT SIDEBAR NAV-->

        </div>
        <!-- END WRAPPER -->

    </div>

    <!-- END MAIN -->
  
<!-- Modal keypad -->
<div id="keypadModal" class="modal keypadinp" >
    <div class="modal-content " style="padding: 2px;">
                      
        <div class="result"><span class="black-text">Send <span class="amtDisplay"></span> to <span class="resDisplay"></span></span></div>
             
         <div id="main">
             
                 <div class="rows">
                 <button value="1" class="keypadKey btn-style  num-bg  first-child">1</button>
                 <button value="2" class="keypadKey btn-style num-bg first-child">2</button>
                 <button value="3" class="keypadKey btn-style num-bg first-child">3</button>
                 </div>            
                 
                 <div class="rows">
                 <button value="4" class="keypadKey btn-style num-bg  first-child">4</button>
                 <button value="5" class="keypadKey btn-style num-bg first-child">5</button>
                 <button value="6" class="keypadKey btn-style num-bg first-child">6</button>
                 </div>
                 
                 <div class="rows">
             <button value="7" class="keypadKey btn-style num-bg  first-child">7</button>
                 <button value="8" class="keypadKey btn-style num-bg first-child">8</button>
                 <button value="9" class="keypadKey btn-style num-bg first-child">9</button>
                 </div>
                 
                 <div class="rows">
                  <button value="cancel" class="KeypadButtonClose btn-style  num-bg first-child red-text text-darken-2"><i class="mdi-content-clear"></i></button>
                 <button value="0" class="keypadKey btn-style num-bg first-child">0</button>
                 <button value="ok" class="keypadKey btn-style  num-bg first-child green-text text-darken-3"><i class="mdi-action-done"></i></button>
                 </div>
                 
                
             </div>
         
         </div>
        

    </div>
</div>
    

<!-- modal end -->
    <!-- Modal Structure 
  <div id="serviceModal" class="modal modal-bits blog-card" >
    <div class="modal-content " style="padding: 2px;">
                                <div class="">
                                <div class="card small">
                                    <div class="card-image waves-effect waves-block waves-light">
                                      <img  src="images/merchantsBanner.png" alt="blog-img" class="cardimage service-banner"> 
                                    </div>
                                    <ul class="card-action-buttons left">
                                        <li><div class="col s2">
                                        <img src="images/merchants.png" alt="" class="cardLogo bits-up circle btn-floating btn-large  waves-effect waves-light bits-white accent-4 responsive-img valign profile-image">
                                            </div>
                                        
                                        </li>
                                        
                                    </ul>
                                    <ul class="card-action-buttons">-->
                                      <!-- <li><a class="btn-floating waves-effect waves-light red accent-4 disabled"><i class="mdi-communication-call-made"></i></a>
                                        </li>
                                        <li><a class="btn-floating waves-effect waves-light green accent-4 disabled"><i class="mdi-communication-call-received"></i></a>
                                        </li>                            
                                        <li><a class="btn-floating waves-effect waves-light light-blue"><i class="mdi-action-search activator"></i></a>
                                        </li>
                                    </ul>
                                    <div class="card-content">
                                        
                                                                               
                                        <div class="row bits-row">
                                          
                                          <div class="col s12 "> <h5 class="serviceName bits-move"></h5></div>
                                        </div>
                                      <div class="row">
                                        <p class="serviceDescription">Loading....</p>
                                     
                                    </div>

                                    <div class="card-reveal">
                                        <span class="card-title grey-text text-darken-4"><i class="mdi-navigation-close right"></i> Apple MacBook Pro A1278 13"</span>
                                        <p>Here is some more information about this blog that is only revealed once clicked on.</p>
                                    </div>
                                </div>
                                </div>
                            
    </div>
       <div class="modal-content" style="padding: 2px;">
        </div>
                                      <div class="row" style="margin-top: 9%; margin-bottom: 0px;">
                                     <ul class="card-action-buttons col s12 m8 l9 ">
                                      <li class="card-action-buttons col s6 m8 l9 "><a class="bits-transpatent col s12 m8 l9  btn waves-effect waves-light  accent-4 disabled"style="background-color: rgba(0, 0, 0, 0) !important;"><i class="mdi-communication-call-made"></i> Send</a>
                                        </li>
                                        <li class="card-action-buttons col s6 m8 l9 "><a class="bits-transpatent col s12 m8 l9 btn waves-effect waves-light  accent-4 disabled"style="background-color: rgba(0, 0, 0, 0) !important;"><i class="mdi-communication-call-received"></i> Receive</a>
                                        </li> -->                           
                                       <!--  <li><a class="btn-floating waves-effect waves-light light-blue"><i class="mdi-action-search activator"></i></a>
                                        </li>
                                    </ul>
                                      </div>  
           <div class="col s12 m8 l9">
                <ul  class="serviceListHolder collection">
                 
                 <div class="serviceListHolder"></div> 
                  
                </ul>
              </div>                   
                            
    </div>
    </div>-->

    <!-- //////////////////////////////////////////////////////////////////////////// -->

    <!-- START FOOTER -->
   
    <!-- END FOOTER -->


    <!-- ================================================
    Scripts
    ================================================ -->
    <!-- jQuery Library -->
    <script type="text/javascript" src="js/plugins/jquery-1.11.2.min.js"></script>    
    <!--materialize js-->
    <script type="text/javascript" src="js/materialize.js"></script>
    <!--scrollbar-->
    <script type="text/javascript" src="js/plugins/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    
 <script src="https://bitsoko.io/bitsAssets/js/bitcore-ecies.min.js"></script> 
	<script src="https://bitsoko.io/bitsAssets/js/bitcore.min.js"></script>
	    <script src="https://bitsoko.io/bitsAssets/js/knockout-3.1.0.js" async></script>
	    <script src="https://bitsoko.io/bitsAssets/js/raphQR.js" async></script>
	    <script src="https://bitsoko.io/bitsAssets/js/qrcodesvg.js" async></script>
	    <script src="https://bitsoko.io/bitsAssets/js/broadcastChannel.js" async></script>
	    <script src="https://bitsoko.io/bitsAssets/js/moment.js" async></script>
	    <script src="https://bitsoko.io/bitsAssets/js/storeManager.js"></script>	    
	    <script src="https://bitsoko.io/bitsAssets/js/locationManager.js"></script>
	    <script src="https://bitsoko.io/bitsAssets/js/globalServices.js" async></script>
	    <script src="https://bitsoko.io/bitsAssets/js/pushManager.js" async></script>
   		<script src="https://bitsoko.io/bitsAssets/js/md5.min.js" async defer></script>
		<script src="js/bitcore-ecies.min.js" ></script> 
		<script src="js/bitcore.min.js"></script>

  
    <script type="text/javascript" src="js/bitsCore.js"></script>
    <script type="text/javascript" src="js/init.js" defer></script>

    
    <!--plugins.js - Some Specific JS codes for Plugin Settings-->
    <script type="text/javascript" src="js/plugins.js"></script>
    <!--custom-script.js - Add your own theme custom JS-->
    <script type="text/javascript" src="js/custom-script.js"></script>
    <!-- Toast Notification
    <script type="text/javascript">
    // Toast Notification
    $(window).load(function() {
        setTimeout(function() {
            Materialize.toast('<span>Hiya! I am a toast.</span>', 1500);
        }, 1500);
        setTimeout(function() {
            Materialize.toast('<span>You can swipe me too!</span>', 3000);
        }, 5000);
        setTimeout(function() {
            Materialize.toast('<span>You have new order.</span><a class="btn-flat yellow-text" href="#">Read<a>', 3000);
        }, 15000);
    });
    </script> -->
    <script>
		
	if ((!location.port || location.port == "80") && location.protocol != 'https:') {
        //location.protocol = 'https:';
      }
            
 	if ("onhashchange" in window) {
 
     function locationHashChanged(e) {
         console.log(e);
      // mgHash(e.newURL);
       serviceOpener()
         
}
        window.addEventListener("hashchange", locationHashChanged, false);
           //console.log("The browser supports the hashchange event!");
}           
 


       function getBitsWinOpt(aKey){      
 var pairs = window.location.hash.slice(1).split("&");
            
for(var i = 0, aKey=aKey; i < pairs.length; ++i) {
var key=pairs[i].split("=")[0];
    var value=pairs[i].split("=")[1];
 if (key==aKey){
     
     return value;
 
 }  
    
}
    
    
}
        function getBitsOpt(aKey){     
 var pairs = window.location.search.slice(1).split("&");
            
for(var i = 0, aKey=aKey; i < pairs.length; ++i) {
var key=pairs[i].split("=")[0];
    var value=pairs[i].split("=")[1];
 if (key==aKey){
     
     return value;
 
 }  
    
}
    
    
}
function tabulateTotals(){
	console.log(this);
var addproducts = document.querySelectorAll(".bitsInputQty");
var totals = 0;
for(var i = 0; i< addproducts.length; ++i){
//addproducts[i].addEventListener("change",tabulateTotals,false);
try{
	var itVal=$(addproducts[i]).val() ? $(addproducts[i]).val() : 0;
totals = totals+(parseInt($(addproducts[i]).attr("price"))*parseInt(itVal));

$(".totals").html(totals);
}catch(err){}
}



}

  function serviceOpener(){

  

  	if (getBitsWinOpt('s') && parseInt(getBitsWinOpt('s')) >3 ) 
 {

 	$(".serviceListHolder").show();
 	$(".serviceListCard").show();
 $(".promoHolder").hide();
 	 doFetch({ action: 'serviceProfile', id: getBitsWinOpt('s')}).then(function(e){
           if (e.status=="ok"){
$(".resDisplay").html( e.data.name);
        document.querySelector('.serviceName').innerHTML = e.data.name;
        document.querySelector('.cardimage').src = e.data.banner;
         document.querySelector('.cardLogo').src = e.data.icon;
		//document.querySelector('.serviceDescription').innerHTML = e.data.price;
		document.querySelector('.serviceDescription').innerHTML = e.data.description;
		//document.querySelector('.serviceDescription').innerHTML = e.data.metric;
		 $('.serviceListHolder').html("");
 for(var ii = 0; ii < e.data.list.length; ++ii) {
        $('.serviceListHolder').append('<li class="collection-item waves-effect avatar bits-max"><img src="'+e.data.list[ii].image+'" alt="" class="circle"><span class="title"><span class="serviceListTitle"> '+e.data.list[ii].name+' </span></span><p class="serviceListFirstline"> <span class="bits-badge bits left">'+e.data.list[ii].price+' <span class="localCurr"></span> per '+e.data.list[ii].metric+' </span></p><span class="secondary-content"><p class="col s4"> <input class="number bitsInputQty" price="'+e.data.list[ii].price+'" type="number" placeholder="0" min="0.25" max="10" id='+e.data.list[ii].name+'> '+e.data.list[ii].metric+' (s)<label for='+e.data.list[ii].name+'></label></p></span></li>');
        	
        	};
var addproducts = document.querySelectorAll(".bitsInputQty");
for(var i = 0; i< addproducts.length; ++i){
	addproducts[i].addEventListener("change",tabulateTotals,false);

}

 $( "body" ).scrollTop( 268 );

             
           }else{
                $(".serviceListHolder").hide();
                $(".serviceListCard").hide();
 $(".promoHolder").show();
           }

          
        });
         
 } 
//$('#serviceModal').attr('service', getBitsWinOpt('s'));
 
     //$('#serviceModal').openModal(); 
   /*   $('#serviceModal').openModal({
      dismissible: true, // Modal can be dismissed by clicking outside of the modal
      opacity: .5, // Opacity of modal background
      in_duration: 300, // Transition in duration
      out_duration: 200, // Transition out duration
      starting_top: '4%', // Starting top style attribute
      ending_top: '10%', // Ending top style attribute
      ready: function() { 

       }, // Callback for Modal open
     // complete: function() { alert('Closed'); } // Callback for Modal close
    }); */
  

  }   




  function handleModal(){
      console.log(this);
      $('#serviceModal').attr('service',$(this).attr('service'));
      $('#serviceModal').attr('account',$(this).attr('account'));

      populateModal($(this).attr('service'),$(this).attr('account')); 

  }


 
          
       //createACS(elmACS,template,thatDoc);

      var items =  [ 
      {dataModal:'#modal'}
      ]
    
    for(var ii = 0; ii < items.length; ++ii) {
       
       // template.querySelector('data-modal').innerHTML = items[ii].dataModal;
		

		// homeFeed.appendChild(thatDoc.importNode(template, true));
      
             };

      var items =  [
      {name:'sam',desc:'another desription',image:'background5.jpg'},
      {name:'sam',desc:'another desription',image:'background5.jpg'}
      ]
    
    for(var ii = 0; ii < items.length; ++ii) {
       
       // document.querySelector('.serviceName').innerHTML = items[ii].name;
		//document.querySelector('.serviceDescription').innerHTML = items[ii].desc;
		//template.querySelector('.card-reveal-content').innerHTML = items[ii].cardcontent;

		 //homeFeed.appendChild(thatDoc.importNode(template, true));
      
             };

          var activeService;
          allServices =  [
     
      {name:'Merchants',id:'3',desc:'Merchant desription',cardimage:'merchantsBanner',cardLogo:'merchants',image:'mdi-maps-store-mall-directory',list:[]},
       {name:'Contacts',id:'1',desc:'Contacts desription',cardimage:'contactsBanner',cardLogo:'contacts',image:'mdi-social-group',list:[]},      
      ]
    
    for(var ii = 0; ii < allServices.length; ++ii) {

		$('.serviceButtonsHolder').append('<li><a  href="#serviceModal" service="'+allServices[ii].id+'" class="serviceButtons btn-floating bits "><i class="large '+allServices[ii].image+'"></i>text</a></li>');
      
             };

  var el = document.querySelectorAll(".serviceButtons");

for(var l=0, el=el; l < el.length; ++l){

  el[l].addEventListener("touchstart", handleModal, false);

}

     function populateModal(x,y){

         console.log(x,y)



    for(var ii = 0,x=x,activeService=activeService; ii < allServices.length; ++ii) {
        if(allServices[ii].id==x){
            activeService=allServices[ii];
        }
		};



             if ( activeService.list.length==0){
             	$('.serviceListHolder').html("");
$('.serviceListHolder').append('<li onclick="updateServicelist()" class="collection-item waves-effect avatar"  style="background-color: inherit;"><img src="images/'+activeService.cardLogo+'.png" alt="" class="circle bits-dis-image"><span class="title"><span class="serviceListTitle">Empty</span></span><p class="serviceListFirstline"> Click to update your '+activeService.name+' list <br class="servicelistSeccondline">  </p><a href="#!" class="secondary-content"></a></li>');
      
             }



        document.querySelector('.serviceName').innerHTML = activeService.name;
        document.querySelector('.cardimage').src = "images/"+activeService.cardimage+".png";
         document.querySelector('.cardLogo').src = "images/"+activeService.cardLogo+".png";
		document.querySelector('.serviceDescription').innerHTML = activeService.desription;
//add button

updateServicelist();

  
  var el = document.querySelectorAll(".loadButtons");

for(var l=0, el=el; l < el.length; ++l){

  el[l].addEventListener("touchstart", handleModal, false);

}

     function populateModal(x,y){

         console.log(x,y)



    for(var ii = 0,x=x,activeService=activeService; ii < serviceList.length; ++ii) {
        if(serviceList[ii].id==x){
            activeService=serviceList[ii];
        }
		
		if (serviceList[ii].id==1){
			 document.querySelector('.service-banner').src = 'https://bitsoko.io/merch/images/icon.png';

		}else if(serviceList[ii].id==2){
			 document.querySelector('.service-banner').src = 'https://bitsoko.io/merch/images/icon.png';

		}
             };



        document.querySelector('.btnname').innerHTML = activeService.name;
		//document.querySelector('.serviceDescription').innerHTML = activeService.desc;
//Populate list

       //document.querySelector('.serviceListTitle').innerHTML = serviceList[ii].name;
		//document.querySelector('.serviceListFirstline').innerHTML = serviceList[ii].desc;
		//document.querySelector('.servicelistSeccondline').innerHTML = items[ii].cardcontent;

		
      
             };
     }
 //function to hide and display nav-bar balance div     
                 $(window).scroll(function(){
   var scroll = $(window).scrollTop();
   if (scroll > 100) {
      $("#bits-nav-bal").css({"display":"initial"});
    } else {
      $("#bits-nav-bal").css({"display":"none"});
    } 
    }
    ); 		
     
		$(window).scroll(function() {     
    var scroll = $(window).scrollTop();
    if (scroll > 150) {
        $("#bits-header").addClass("active");
    }
    else {
        $("#bits-header").removeClass("active");
    }
});
//updating service list function
function updateServicelist(){ 
activeService=$('#serviceModal').attr('service');
	doFetch({ action: 'serviceList', data: activeService, user: localStorage.getItem("bitsoko-user-name")}).then(function(e){
           if (e.status=="ok"){
        serviceList = e.data;
            
    for(var ii = 0; ii < serviceList.length; ++ii) {

		$('.serviceListHolder').append('<li class="collection-item avatar"><img src="images/avatar.jpg" alt="" class="circle"><span class="title"><span class="serviceListTitle">'+serviceList[ii].name+'</span></span><p class="serviceListFirstline"><br class="servicelistSeccondline"> Second Line </p><a href="#!" class="secondary-content"><i class="mdi-action-grade"></i></a></li>');
      
             };

           }else{
                 
           }
        });
}

  function updatePromos(){

      doFetch({ action: 'nearbyPromos', loc: 
    localStorage.getItem('bitsoko-settings-location')}).then(function(e){
           if (e.status=="ok"){
           	 for(var ii = 0; ii < e.promotions.length; ++ii) {
$('.promoHolder').append(' <li class="col s12 m12 l4 "><div class="product-card"><div class="card small"><div class="card-image waves-effect waves-block waves-light"><a href="#" class="btn-floating btn-large btn-price waves-effect waves-light  bits accent-2">'+e.promotions[ii].discount+'% off</a><img src="'+e.promotions[ii].promoBanner+'" alt="product-img"></div><ul class="card-action-buttons"><li><a class="btn-floating waves-effect waves-light green accent-4"><i class="mdi-av-repeat"></i></a></li><li><a class="btn-floating waves-effect waves-light red accent-2"><i class="mdi-action-favorite"></i></a></li><!--<li><a class="btn-floating waves-effect waves-light light-blue"><i class="mdi-action-info activator"></i></a></li>--></ul><div class="card-content"><div class="row"><div class="col s8"><p class="card-title grey-text text-darken-4"><img src="'+e.promotions[ii].promoLogo+'" alt="amazon" class="responsive-img"><p><a href="#" class="grey-text text-darken-4">'+e.promotions[ii].promoDesc+'</a></p></div><div class="col s4 no-padding"><a href=""></a></div></div></div><div class="card-reveal"><span class="card-title grey-text text-darken-4"><i class="mdi-navigation-close right"></i> Apple MacBook Pro A1278 13"</span><p>Here is some more information about this product that is only revealed once clicked on.</p></div></div></div> </li>');
                   
             };
        console.log(e);
           }else{
         $('.promoHolder').append('<li id="card-alert" class="card waves-effect waves-block waves-light "style="background-color: inherit;"><div class="card-content grey-text text-darken-2"><span class="card-title darken-1"><i class="mdi-social-notifications"></i> Promotions</span><p>No promotions found in your area, please try again later.</p></li>');
            
           }
        });
}
$(function(){
    $("#bits-nav-bal").hide();
   
});

//coin change
/*$(document).on('change', '.div-toggle', function() {
  var target = $(this).data('target');
  var show = $("option:selected", this).data('show');
  $(target).children().addClass('hide');
  $(show).removeClass('hide');
});
$(document).ready(function(){
	$('.div-toggle').trigger('change');
});*/



          function sendMessage(message) {
        // This wraps the message posting/response in a promise, which will resolve if the response doesn't
        // contain an error, and reject with the error if it does. If you'd prefer, it's possible to call
        // controller.postMessage() and set up the onmessage handler independently of a promise, but this is
        // a convenient wrapper.
        return new Promise(function(resolve, reject) {
          var messageChannel = new MessageChannel();
          messageChannel.port1.onmessage = function(event) {
            if (event.data.error) {
              reject(event.data.error);
            } else {
              resolve(event.data);
            }
          };

          // This sends the message data as well as transferring messageChannel.port2 to the service worker.
          // The service worker can then use the transferred port to reply via postMessage(), which
          // will in turn trigger the onmessage handler on messageChannel.port1.
          // See https://html.spec.whatwg.org/multipage/workers.html#dom-worker-postmessage
          navigator.serviceWorker.controller.postMessage(message, [messageChannel.port2]);
        });
      }
    /*  function profileLoaded(id){
    
     
    
    */
     $(document).ready(function(){
     	$('.card-bit').pushpin({ top: $('.card-bit').offset().top });
  });
      
</script>
<script type="text/javascript">
$(document).ready(function() {
$(".serviceListHolder").hide();
$(".serviceListCard").hide();
 $(".promoHolder").show();


  $(".serviceButtons").click(function() {
    
$(".serviceListHolder").show();
$(".serviceListCard").show();
    $(".promoHolder").hide();
  });


    $(".saleButton").click(function() {
    $("#keypadModal").openModal();
   // $("#keypadModal").closeModal();
  });


  $(".KeypadButtonClose").click(function() {
    $(".amtDisplay").html("");
    currentTransaction.amount='';
    $("#keypadModal").closeModal();
  });

    $(".keypadKey").click(function() {
    console.log($(this).attr('value'));
    currentTransaction.amount=currentTransaction.amount+$(this).attr('value');
    console.log(currentTransaction.amount);
    $(".amtDisplay").html(currentTransaction.amount)
       
  });
  });
</script>
</body>

</html>